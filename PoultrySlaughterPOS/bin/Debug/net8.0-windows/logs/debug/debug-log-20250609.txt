[2025-06-09 08:21:50.221 +03:00 INF] : Serilog logging infrastructure configured successfully
[2025-06-09 08:21:50.312 +03:00 INF] : === Poultry Slaughter POS Application Starting ===
[2025-06-09 08:21:50.312 +03:00 INF] : Startup initiated with complete customer management integration
[2025-06-09 08:21:50.574 +03:00 INF] : Database configuration - UseExplicitTransactions: true, EnableRetryOnFailure: false
[2025-06-09 08:21:50.805 +03:00 INF] : Service configuration completed successfully with 74 services registered (complete customer management integration)
[2025-06-09 08:21:50.816 +03:00 INF] : Service registration completed - 74 services configured
[2025-06-09 08:21:50.817 +03:00 INF] : Service provider configured successfully
[2025-06-09 08:21:51.556 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:21:52.957 +03:00 WRN] Microsoft.EntityFrameworkCore.Query: The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2025-06-09 08:21:52.970 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow initialized successfully with complete customer management support
[2025-06-09 08:21:53.149 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:21:53.511 +03:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-06-09 08:21:53.673 +03:00 ERR] PoultrySlaughterPOS.Services.Repositories.CustomerRepository: Error retrieving debt summary
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
[2025-06-09 08:21:53.770 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow loaded successfully
[2025-06-09 08:21:53.778 +03:00 INF] : Main window created and displayed successfully
[2025-06-09 08:21:53.779 +03:00 INF] : === Poultry Slaughter POS Application Started Successfully ===
[2025-06-09 08:21:53.797 +03:00 INF] PoultrySlaughterPOS.MainWindow: Dashboard statistics loaded successfully - Trucks: 3, Customers: 3, Invoices: 0, Debt: ¤0.00
[2025-06-09 08:21:53.839 +03:00 ERR] PoultrySlaughterPOS.MainWindow: Error loading dashboard statistics
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
   at PoultrySlaughterPOS.MainWindow.LoadDashboardStatisticsAsync() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\MainWindow.xaml.cs:line 555
[2025-06-09 08:21:53.841 +03:00 WRN] PoultrySlaughterPOS.MainWindow: Status message (Error): خطأ في تحميل إحصائيات النظام
[2025-06-09 08:21:53.841 +03:00 INF] PoultrySlaughterPOS.MainWindow: Initial dashboard loaded successfully
[2025-06-09 08:21:56.040 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:21:56.091 +03:00 INF] PoultrySlaughterPOS.MainWindow: Transaction History view created and configured successfully
[2025-06-09 08:21:56.092 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:21:56.240 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:21:56.913 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:21:56.914 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:21:56.914 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:21:56.914 +03:00 INF] PoultrySlaughterPOS.MainWindow: Successfully navigated to TransactionHistory
[2025-06-09 08:21:57.235 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:21:57.454 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:21:57.454 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:22:09.272 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:22:19.975 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:22:20.998 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:25:30.558 +03:00 INF] : Serilog logging infrastructure configured successfully
[2025-06-09 08:25:30.651 +03:00 INF] : === Poultry Slaughter POS Application Starting ===
[2025-06-09 08:25:30.651 +03:00 INF] : Startup initiated with complete customer management integration
[2025-06-09 08:25:30.890 +03:00 INF] : Database configuration - UseExplicitTransactions: true, EnableRetryOnFailure: false
[2025-06-09 08:25:31.091 +03:00 INF] : Service configuration completed successfully with 74 services registered (complete customer management integration)
[2025-06-09 08:25:31.103 +03:00 INF] : Service registration completed - 74 services configured
[2025-06-09 08:25:31.104 +03:00 INF] : Service provider configured successfully
[2025-06-09 08:25:31.736 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:25:33.094 +03:00 WRN] Microsoft.EntityFrameworkCore.Query: The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2025-06-09 08:25:33.201 +03:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-06-09 08:25:33.370 +03:00 ERR] PoultrySlaughterPOS.Services.Repositories.CustomerRepository: Error retrieving debt summary
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
[2025-06-09 08:25:33.441 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow initialized successfully with complete customer management support
[2025-06-09 08:25:33.652 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:25:33.969 +03:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-06-09 08:25:34.200 +03:00 ERR] PoultrySlaughterPOS.Services.Repositories.CustomerRepository: Error retrieving debt summary
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
[2025-06-09 08:25:34.295 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow loaded successfully
[2025-06-09 08:25:34.307 +03:00 INF] : Main window created and displayed successfully
[2025-06-09 08:25:34.307 +03:00 INF] : === Poultry Slaughter POS Application Started Successfully ===
[2025-06-09 08:25:34.373 +03:00 ERR] PoultrySlaughterPOS.MainWindow: Error loading dashboard statistics
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
   at PoultrySlaughterPOS.MainWindow.LoadDashboardStatisticsAsync() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\MainWindow.xaml.cs:line 555
[2025-06-09 08:25:34.375 +03:00 WRN] PoultrySlaughterPOS.MainWindow: Status message (Error): خطأ في تحميل إحصائيات النظام
[2025-06-09 08:25:34.480 +03:00 ERR] PoultrySlaughterPOS.MainWindow: Error loading dashboard statistics
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
   at PoultrySlaughterPOS.MainWindow.LoadDashboardStatisticsAsync() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\MainWindow.xaml.cs:line 555
[2025-06-09 08:25:34.482 +03:00 WRN] PoultrySlaughterPOS.MainWindow: Status message (Error): خطأ في تحميل إحصائيات النظام
[2025-06-09 08:25:34.482 +03:00 INF] PoultrySlaughterPOS.MainWindow: Initial dashboard loaded successfully
[2025-06-09 08:25:36.695 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:25:36.745 +03:00 INF] PoultrySlaughterPOS.MainWindow: Transaction History view created and configured successfully
[2025-06-09 08:25:36.746 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:25:36.892 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:25:37.455 +03:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-06-09 08:25:37.568 +03:00 ERR] PoultrySlaughterPOS.Services.Repositories.CustomerRepository: Error finding entities Customer with predicate
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.Repository`1.FindAsync(Expression`1 predicate, CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Repository.cs:line 69
[2025-06-09 08:25:37.639 +03:00 ERR] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Error loading transactions
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.Repository`1.FindAsync(Expression`1 predicate, CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Repository.cs:line 69
   at PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel.<LoadTransactionsAsync>b__35_0() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TransactionHistoryViewModel.cs:line 270
[2025-06-09 08:25:37.709 +03:00 ERR] PoultrySlaughterPOS.Services.ErrorHandlingService: Error 530a299b in حدث خطأ أثناء العملية: InvalidOperationException - A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.Repository`1.FindAsync(Expression`1 predicate, CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Repository.cs:line 69
   at PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel.<LoadTransactionsAsync>b__35_0() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TransactionHistoryViewModel.cs:line 270
   at PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel.ExecuteWithLoadingAsync(Func`1 operation) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\ViewModels\TransactionHistoryViewModel.cs:line 581
[2025-06-09 08:25:37.771 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:25:37.771 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:25:37.800 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:25:37.801 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:25:37.801 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:25:37.802 +03:00 INF] PoultrySlaughterPOS.MainWindow: Successfully navigated to TransactionHistory
[2025-06-09 08:25:40.062 +03:00 INF] PoultrySlaughterPOS.MainWindow: Reports navigation attempted - feature under development
[2025-06-09 08:25:41.012 +03:00 INF] PoultrySlaughterPOS.MainWindow: Successfully navigated to TransactionHistory
[2025-06-09 08:26:20.096 +03:00 INF] : Serilog logging infrastructure configured successfully
[2025-06-09 08:26:20.140 +03:00 INF] : === Poultry Slaughter POS Application Starting ===
[2025-06-09 08:26:20.140 +03:00 INF] : Startup initiated with complete customer management integration
[2025-06-09 08:26:20.230 +03:00 INF] : Database configuration - UseExplicitTransactions: true, EnableRetryOnFailure: false
[2025-06-09 08:26:20.332 +03:00 INF] : Service configuration completed successfully with 74 services registered (complete customer management integration)
[2025-06-09 08:26:20.342 +03:00 INF] : Service registration completed - 74 services configured
[2025-06-09 08:26:20.343 +03:00 INF] : Service provider configured successfully
[2025-06-09 08:26:21.109 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:26:22.485 +03:00 WRN] Microsoft.EntityFrameworkCore.Query: The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
[2025-06-09 08:26:22.498 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow initialized successfully with complete customer management support
[2025-06-09 08:26:22.670 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:26:22.968 +03:00 ERR] Microsoft.EntityFrameworkCore.Query: An exception occurred while iterating over the results of a query for context type 'PoultrySlaughterPOS.Data.PoultryDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-06-09 08:26:23.141 +03:00 ERR] PoultrySlaughterPOS.Services.Repositories.CustomerRepository: Error retrieving debt summary
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
[2025-06-09 08:26:23.237 +03:00 INF] PoultrySlaughterPOS.MainWindow: MainWindow loaded successfully
[2025-06-09 08:26:23.245 +03:00 INF] : Main window created and displayed successfully
[2025-06-09 08:26:23.245 +03:00 INF] : === Poultry Slaughter POS Application Started Successfully ===
[2025-06-09 08:26:23.267 +03:00 INF] PoultrySlaughterPOS.MainWindow: Dashboard statistics loaded successfully - Trucks: 3, Customers: 3, Invoices: 0, Debt: ¤0.00
[2025-06-09 08:26:23.311 +03:00 ERR] PoultrySlaughterPOS.MainWindow: Error loading dashboard statistics
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at PoultrySlaughterPOS.Services.Repositories.CustomerRepository.GetDebtSummaryAsync(CancellationToken cancellationToken) in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\Services\Repositories\Implementations\CustomerRepository.cs:line 177
   at PoultrySlaughterPOS.MainWindow.LoadDashboardStatisticsAsync() in C:\Users\Mr. Ahmad\Desktop\8-6-chicken\PoultrySlaughterPOS\PoultrySlaughterPOS\MainWindow.xaml.cs:line 555
[2025-06-09 08:26:23.313 +03:00 WRN] PoultrySlaughterPOS.MainWindow: Status message (Error): خطأ في تحميل إحصائيات النظام
[2025-06-09 08:26:23.314 +03:00 INF] PoultrySlaughterPOS.MainWindow: Initial dashboard loaded successfully
[2025-06-09 08:26:26.376 +03:00 INF] : SQL Server retry strategy disabled to support explicit transactions
[2025-06-09 08:26:26.427 +03:00 INF] PoultrySlaughterPOS.MainWindow: Transaction History view created and configured successfully
[2025-06-09 08:26:26.428 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:26:26.565 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Initializing transaction history view
[2025-06-09 08:26:27.233 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:26:27.235 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:26:27.236 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:26:27.236 +03:00 INF] PoultrySlaughterPOS.MainWindow: Successfully navigated to TransactionHistory
[2025-06-09 08:26:27.374 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:26:27.411 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Transaction history view model initialized successfully
[2025-06-09 08:26:27.411 +03:00 INF] PoultrySlaughterPOS.Views.TransactionHistoryView: Transaction history view initialized successfully
[2025-06-09 08:26:52.060 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:26:52.695 +03:00 INF] PoultrySlaughterPOS.ViewModels.TransactionHistoryViewModel: Loaded 3 transactions for period "2025-05-10T00:00:00.0000000+03:00" to "2025-06-09T00:00:00.0000000+03:00"
[2025-06-09 08:27:12.813 +03:00 INF] PoultrySlaughterPOS.MainWindow: Application closing initiated - performing comprehensive cleanup
[2025-06-09 08:27:12.813 +03:00 INF] PoultrySlaughterPOS.MainWindow: Starting comprehensive resource cleanup
[2025-06-09 08:27:12.816 +03:00 INF] PoultrySlaughterPOS.MainWindow: Resource cleanup completed successfully
[2025-06-09 08:27:12.816 +03:00 INF] PoultrySlaughterPOS.MainWindow: Application cleanup completed successfully
[2025-06-09 08:27:12.835 +03:00 INF] : === Poultry Slaughter POS Application Shutdown Initiated ===
[2025-06-09 08:27:12.838 +03:00 INF] : === Poultry Slaughter POS Application Shutdown Completed ===
